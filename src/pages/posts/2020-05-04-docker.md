---
layout: post
title: "Docker comandos bÃ¡sicos"
header: "Docker comandos bÃ¡sicos"
date: 2020-05-04 16:55:18
keywords: "docker, scripts, comandos, bÃ¡sicos"
categories: docker
description: "A primeira coisa para trabalhar com os container Ã© saber como executÃ¡-los..."
thumbnail: "https://img.icons8.com/color/48/000000/docker.png"
---

# Docker comandos basicos

### __Rodar containers__
A primeira coisa para trabalhar com os container Ã© saber como executÃ¡-los:
```console
root@blog-yagolopes.com:~$ docker run ...
```
Existem vÃ¡rios parÃ¢metros para passar, vou mostrar os principais.
Quando queremos remover o container logo apÃ³s sair dele:
```console
root@blog-yagolopes.com:~$ docker run --rm
```
Quando queremos iteragir com o container:
```console
root@blog-yagolopes.com:~$ docker run -it
```
Quando queremos nomear o container:
```console
root@blog-yagolopes.com:~$ docker run --name developerdeck101-container
```
Quando queremos expor uma porta externamente(3000) e mapear para o porta local do container (80):
```console
root@blog-yagolopes.com:~$ docker run -p 3000:80
```
Quando queremos escolher qual imagem utilizar:
```console
root@blog-yagolopes.com:~$ docker run --name developerdeck101-container ubuntu:14.04
```
Quando queremos dizer qual Ã© o comando que queremos executar:
```console
root@blog-yagolopes.com:~$ docker run --name developerdeck101-container ubuntu:14.04 bash
```
Juntanto tudo:
```console
root@blog-yagolopes.com:~$ docker run --rm -it -p 3000:80 --name developerdeck101-container ubuntu:14.04 bash
```
### __Listar imagens__
Quero saber as imagens locais que tenho disponÃ­vel:
```console
root@blog-yagolopes.com:~$ docker images
```
Quero remover uma imagem local:
```console
root@blog-yagolopes.com:~$ docker rmi ubuntu:14.04
```
### __Containers executanto__
Quero saber quais containers estÃ£o executando:
```console
root@blog-yagolopes.com:~$ docker ps
```
Criar um novo bash em um container executando:
```console
root@blog-yagolopes.com:~$ docker exec -it CONTAINER_NAME bash
```
### __Fazendo os Container conversarem__
Funciona mas nÃ£o Ã© o melhor pois passa pelo host as mensagens:
```console
root@blog-yagolopes.com:~$ docker run --rm -ti -p 1234:1234 ubuntu:14.04 bash
```
Functiona mas infelizmente faz um link nÃ£o dinÃ¢mico:

Server
```console
root@blog-yagolopes.com:~$ docker run --rm -ti --name server ubuntu:14.04 bash
```
Client
```console
root@blog-yagolopes.com:~$ docker run --rm -ti --link server --name client ubuntu:14.04 bash
```
### __Fazendo os Container conversarem de forma correta__
Criar uma rede:
```console
root@blog-yagolopes.com:~$ docker network create yagolopes.net
```
Criar um container:

Server
```console
root@blog-yagolopes.com:~$ docker run --rm -ti --net=yagolopes.net --name server ubuntu:14.04 bash
```

Client
```console
root@blog-yagolopes.com:~$ docker run --rm -ti --link server --net:yagolopes.net --name client ubuntu:14.04 bash
```

### __Criando nosso Ambiente MERN__
Backend Dockerfile
```console
FROM node:10.9.0-alpine
RUN mkdir -p /usr/src/app
WORKDIR /usr/src/app
RUN npm install -g nodemon --quiet
EXPOSE 3000
CMD ["npm", "start"]
```
Frontend Dockerfile
```console
FROM node:10.9.0-alpine
RUN mkdir -p /usr/src/app
EXPOSE 3000
CMD ["npm", "start"]
```
Docker compose file: docker-compose.yml
```console
version: '2'
services:
 mongodb:
  image: "mongo"
  ports:
  - "27017:27017"
 backend:
  build: ./devdeck101-backend/
  ports:
   - "4000:4000"
  volumes:
   - ./devdeck101-backend:/usr/src/app
  depends_on:
   - mongodb
 frontend:
   build: ./devdeck101-frontend/
   ports:
    - "3000:3000"
   volumes:
    - ./devdeck101-frontend:/usr/src/app
   depends_on:
    - backend
```
Construir seu Ambiente
```console
root@blog-yagolopes.com:~$ docker compose build
```
Iniciar seu Ambiente
```console
root@blog-yagolopes.com:~$ docker compose up
```
Desligar/Baixar/Parar seu Ambiente
```console
root@blog-yagolopes.com:~$ docker compose down
```

